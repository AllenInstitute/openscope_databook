

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Getting Experimental Metadata from DANDI &#8212; OpenScope Databook</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-TJPN1M4PDX"></script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'G-TJPN1M4PDX');
            </script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'basics/get_dandiset_metadata';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Visualizing Raw 2-Photon Images" href="../visualization/visualize_2p_raw.html" />
    <link rel="prev" title="Streaming an NWB File with fsspec" href="stream_nwb.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../intro.html">
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../_static/logo.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    OpenScope Databook
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Basics</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="background.html">Background</a></li>
<li class="toctree-l1"><a class="reference internal" href="download_nwb.html">Downloading an NWB File</a></li>
<li class="toctree-l1"><a class="reference internal" href="read_nwb.html">Reading an NWB File</a></li>
<li class="toctree-l1"><a class="reference internal" href="use_nwbwidgets.html">Exploring an NWB File</a></li>
<li class="toctree-l1"><a class="reference internal" href="stream_nwb.html">Streaming an NWB File with fsspec</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Getting Experimental Metadata from DANDI</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Visualizing NWB Files</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../visualization/visualize_2p_raw.html">Visualizing Raw 2-Photon Images</a></li>
<li class="toctree-l1"><a class="reference internal" href="../visualization/visualize_neuropixel_probes.html">Visualizing Neuropixel Probe Locations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../visualization/visualize_unit_metrics.html">Visualizing Unit Quality Metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../visualization/visualize_lfp_responses.html">Visualizing LFP Responses to Stimulus</a></li>
<li class="toctree-l1"><a class="reference internal" href="../visualization/visualize_unit_responses.html">Visualizing Neuronal Unit Spikes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../visualization/visualize_2p_responses.html">Visualizing 2P Responses to Stimulus</a></li>
<li class="toctree-l1"><a class="reference internal" href="../visualization/visualize_unit_spikes.html">Visualizing Unit Spikes</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">First-Order Analysis</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../first-order/receptive_fields.html">Showing Receptive Fields</a></li>
<li class="toctree-l1"><a class="reference internal" href="../first-order/optotagging.html">Identifying Optotagged Units</a></li>
<li class="toctree-l1"><a class="reference internal" href="../first-order/current_source_density.html">Current Source Density Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../first-order/test_2p_responses.html">Statistically Testing 2P Responses to Stimulus</a></li>
<li class="toctree-l1"><a class="reference internal" href="../first-order/test_spike_responses.html">Statistically Testing Spike Responses to Stimulus</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Replicating Figures</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../replication/cred_assign_figures.html">Replicating OpenScope Credit Assignment project figures</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Embargoed Datasets</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../embargoed/modality_alignment.html">Aligning Data across Modalities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../embargoed/visualize_behavior.html">Visualizing Behavioral Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../embargoed/test_2p_responses_embargoed.html">Statistically Testing 2P Responses to Stimulus</a></li>
<li class="toctree-l1"><a class="reference internal" href="../embargoed/cell_matching.html">Cell Matching Across Days</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Methods</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../methods/jupyter_book.html">Jupyter/Jupyter Book</a></li>
<li class="toctree-l1"><a class="reference internal" href="../methods/github.html">Git/Github</a></li>
<li class="toctree-l1"><a class="reference internal" href="../methods/environments.html">Managing Environments on Multiple Platforms</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Bibliography and FAQ</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../bibliography.html">Bibliography</a></li>
<li class="toctree-l1"><a class="reference internal" href="../FAQ.html">FAQ</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://mybinder.org/v2/gh/AllenInstitute/openscope_databook/main?urlpath=tree/docs/basics/get_dandiset_metadata.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch onBinder"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img src="../_static/images/logo_binder.svg">
  </span>
<span class="btn__text-container">Binder</span>
</a>
</li>
      
      
      
      
      <li><a href="https://hub.dandiarchive.org/hub/user-redirect/git-pull?repo=https%3A//github.com/AllenInstitute/openscope_databook&urlpath=tree/openscope_databook/docs/basics/get_dandiset_metadata.ipynb&branch=main" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch onJupyterHub"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img src="../_static/images/logo_jupyterhub.svg">
  </span>
<span class="btn__text-container">JupyterHub</span>
</a>
</li>
      
      
      
      
      <li><a href="https://colab.research.google.com/github/AllenInstitute/openscope_databook/blob/main/docs/basics/get_dandiset_metadata.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch onColab"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img src="../_static/images/logo_colab.png">
  </span>
<span class="btn__text-container">Colab</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="initThebeSBT()"
  class="btn btn-sm btn-launch-thebe dropdown-item"
  title="Launch Thebe"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-play"></i>
  </span>
<span class="btn__text-container">Live Code</span>
</button>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/AllenInstitute/openscope_databook" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/AllenInstitute/openscope_databook/issues/new?title=Issue%20on%20page%20%2Fbasics/get_dandiset_metadata.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/basics/get_dandiset_metadata.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Getting Experimental Metadata from DANDI</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#environment-setup">Environment Setup</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#getting-dandiset-metadata">Getting Dandiset Metadata</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#get-nwb-info">Get NWB Info</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#getting-table">Getting Table</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#selecting-files">Selecting Files</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#downloading-selected-files">Downloading Selected Files</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="getting-experimental-metadata-from-dandi">
<h1>Getting Experimental Metadata from DANDI<a class="headerlink" href="#getting-experimental-metadata-from-dandi" title="Permalink to this heading">#</a></h1>
<p>It can be helpful to view general information about the experimental sessions that produced your data. Since typically each NWB File represents one session, a dandiset’s files can be examined to get an overview of each of the sessions. This can vary, depending on who produced the NWB file. In this notebook, NWB Files within one of the Allen Institute’s datasets are opened and some basic information is used to make a table of the experimental sessions and their properties.</p>
<section id="environment-setup">
<h2>Environment Setup<a class="headerlink" href="#environment-setup" title="Permalink to this heading">#</a></h2>
<p>⚠️<strong>Note: If running on a new environment, run this cell once and then restart the kernel</strong>⚠️</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">dandi_utils</span> <span class="kn">import</span> <span class="n">dandi_stream_open</span>
<span class="k">except</span><span class="p">:</span>
    <span class="o">!</span>git clone https://github.com/AllenInstitute/openscope_databook.git
    <span class="o">%</span><span class="k">cd</span> openscope_databook
    <span class="o">%</span><span class="k">pip</span> install -e .
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">fsspec</span>
<span class="kn">import</span> <span class="nn">h5py</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="kn">from</span> <span class="nn">dandi</span> <span class="kn">import</span> <span class="n">dandiapi</span>
<span class="kn">from</span> <span class="nn">fsspec.implementations.cached</span> <span class="kn">import</span> <span class="n">CachingFileSystem</span>
<span class="kn">from</span> <span class="nn">pynwb</span> <span class="kn">import</span> <span class="n">NWBHDF5IO</span>

<span class="o">%</span><span class="k">matplotlib</span> inline
</pre></div>
</div>
</div>
</div>
</section>
<section id="getting-dandiset-metadata">
<h2>Getting Dandiset Metadata<a class="headerlink" href="#getting-dandiset-metadata" title="Permalink to this heading">#</a></h2>
<p>To view other data, change <code class="docutils literal notranslate"><span class="pre">dandiset_id</span></code> to be the id of the dandiset you’re interested in. If the dandiset is embargoed, set <code class="docutils literal notranslate"><span class="pre">dandi_api_key</span></code> to your DANDI API key.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dandiset_id</span> <span class="o">=</span> <span class="s2">&quot;000021&quot;</span>
<span class="n">dandi_api_key</span> <span class="o">=</span> <span class="kc">None</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">my_dandiset</span> <span class="o">=</span> <span class="n">dandiapi</span><span class="o">.</span><span class="n">DandiAPIClient</span><span class="p">(</span><span class="n">token</span><span class="o">=</span><span class="n">dandi_api_key</span><span class="p">)</span><span class="o">.</span><span class="n">get_dandiset</span><span class="p">(</span><span class="n">dandiset_id</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Got dandiset </span><span class="si">{</span><span class="n">my_dandiset</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>A newer version (0.55.1) of dandi/dandi-cli is available. You are using 0.46.6
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Got dandiset DANDI:000021/draft
</pre></div>
</div>
</div>
</div>
</section>
<section id="get-nwb-info">
<h2>Get NWB Info<a class="headerlink" href="#get-nwb-info" title="Permalink to this heading">#</a></h2>
<p>Below are two definitions of thefunction <code class="docutils literal notranslate"><span class="pre">get_nwb_info</span></code>. These function are tailored to our NWB Files; Our <em>Ophys</em> and our <em>Ecephys</em> datasets respectively. It retrieves a series of important metadata values from the NWB file object. It is likely that the code for accessing the fields of interest to you will be slightly different for your files. This can easily altered to extract any other information from an NWB file you want as long as you’re familiar with the internal layout of your files. However, make sure to change the <code class="docutils literal notranslate"><span class="pre">columns</span></code> field in the pandas dataframe below to properly reflect any changes to the function.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># get experimental information from within ophys file</span>
<span class="c1"># getattr is used because not all nwb files have all properties. If not handled like this, errors will arise</span>
<span class="c1"># def get_nwb_info(nwb):</span>
<span class="c1">#         session_time = getattr(nwb, &quot;session_start_time&quot;, None)</span>

<span class="c1">#         metadata_obj = getattr(nwb, &quot;lab_meta_data&quot;, {})</span>
<span class="c1">#         metadata = metadata_obj.get(&quot;metadata&quot;, None)</span>
<span class="c1">#         session_id = getattr(metadata, &quot;ophys_session_id&quot;, None)</span>
<span class="c1">#         experiment_id = getattr(metadata, &quot;ophys_experiment_id&quot;, None)</span>

<span class="c1">#         fov_height = getattr(metadata, &quot;field_of_view_height&quot;, None)</span>
<span class="c1">#         fov_width = getattr(metadata, &quot;field_of_view_width&quot;, None)</span>
<span class="c1">#         imaging_depth = getattr(metadata, &quot;imaging_depth&quot;, None)</span>
<span class="c1">#         group = getattr(metadata, &quot;imaging_plane_group&quot;, None)</span>
<span class="c1">#         group_count = getattr(metadata, &quot;imaging_plane_group_count&quot;, None)</span>
<span class="c1">#         container_id = getattr(metadata, &quot;experiment_container_id&quot;, None)</span>
        
<span class="c1">#         subject = getattr(nwb, &quot;subject&quot;, None)</span>
<span class="c1">#         specimen_name = getattr(subject, &quot;subject_id&quot;, None)</span>
<span class="c1">#         age = getattr(subject, &quot;age&quot;, None)</span>
<span class="c1">#         sex = getattr(subject, &quot;sex&quot;, None)</span>
<span class="c1">#         genotype = getattr(subject, &quot;genotype&quot;, None)</span>
        
<span class="c1">#         try: n_rois = nwb.processing[&quot;ophys&quot;][&quot;dff&quot;].roi_response_series[&quot;traces&quot;].data.shape[1]</span>
<span class="c1">#         except: n_rois = None</span>
<span class="c1">#         try: location = list(nwb.imaging_planes.values())[0].location</span>
<span class="c1">#         except: location = None</span>
        
<span class="c1">#         intervals = getattr(nwb, &quot;intervals&quot;, {})</span>
<span class="c1">#         stim_types = set(intervals.keys())</span>
<span class="c1">#         stim_tables = [intervals[table_name] for table_name in intervals]</span>
<span class="c1">#         # gets highest value among final &quot;stop times&quot; of all stim tables in intervals</span>
<span class="c1">#         session_end = max([table.stop_time[-1] for table in stim_tables if len(table) &gt; 1])</span>

<span class="c1">#         return [session_time, session_id, experiment_id, container_id, group, group_count, imaging_depth, location, fov_height, fov_width, specimen_name, sex, age, genotype, stim_types, n_rois, session_end]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># get experimental information from within ecephys file</span>
<span class="c1"># getattr is used because not all nwb files have all properties. If not handled like this, errors will arise</span>
<span class="k">def</span> <span class="nf">get_nwb_info</span><span class="p">(</span><span class="n">nwb</span><span class="p">):</span>
        <span class="n">session_time</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">nwb</span><span class="p">,</span> <span class="s2">&quot;session_start_time&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

        <span class="n">subject</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">nwb</span><span class="p">,</span> <span class="s2">&quot;subject&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">specimen_name</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">subject</span><span class="p">,</span> <span class="s2">&quot;specimen_name&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">age</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">subject</span><span class="p">,</span> <span class="s2">&quot;age_in_days&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">sex</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">subject</span><span class="p">,</span> <span class="s2">&quot;sex&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">genotype</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">subject</span><span class="p">,</span> <span class="s2">&quot;genotype&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

        <span class="n">probes</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">nwb</span><span class="p">,</span> <span class="s2">&quot;devices&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="n">units</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">nwb</span><span class="p">,</span> <span class="s2">&quot;units&quot;</span><span class="p">,</span> <span class="p">[])</span>
        <span class="n">n_units</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">units</span><span class="p">)</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">units</span><span class="p">,</span> <span class="s1">&#39;__len__&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="mi">0</span>        
        
        <span class="n">intervals</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">nwb</span><span class="p">,</span> <span class="s2">&quot;intervals&quot;</span><span class="p">,</span> <span class="p">{})</span>
        <span class="n">stim_types</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">intervals</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="n">stim_tables</span> <span class="o">=</span> <span class="p">[</span><span class="n">intervals</span><span class="p">[</span><span class="n">table_name</span><span class="p">]</span> <span class="k">for</span> <span class="n">table_name</span> <span class="ow">in</span> <span class="n">intervals</span><span class="p">]</span>
        <span class="c1"># gets highest value among final &quot;stop times&quot; of all stim tables in intervals</span>
        <span class="n">session_end</span> <span class="o">=</span> <span class="nb">max</span><span class="p">([</span><span class="n">table</span><span class="o">.</span><span class="n">stop_time</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">table</span> <span class="ow">in</span> <span class="n">stim_tables</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">table</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">])</span>

        <span class="k">return</span> <span class="p">[</span><span class="n">session_time</span><span class="p">,</span> <span class="n">specimen_name</span><span class="p">,</span> <span class="n">sex</span><span class="p">,</span> <span class="n">age</span><span class="p">,</span> <span class="n">genotype</span><span class="p">,</span> <span class="n">probes</span><span class="p">,</span> <span class="n">stim_types</span><span class="p">,</span> <span class="n">n_units</span><span class="p">,</span> <span class="n">session_end</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="getting-table">
<h2>Getting Table<a class="headerlink" href="#getting-table" title="Permalink to this heading">#</a></h2>
<p>Here, each relevant file in the dandiset is streamed and opened remotely to get the information of interest using the function <code class="docutils literal notranslate"><span class="pre">get_nwb_info</span></code>, defined above, and then it is added to a table of sessions and their metadata. Since some files are for specific probes rather than entire sessions, they are skipped. Opening each NWB File can take several minutes. Depending on how many files your dandiset loops through, this step can take a very long time.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># set up streaming filesystem</span>
<span class="n">fs</span> <span class="o">=</span> <span class="n">fsspec</span><span class="o">.</span><span class="n">filesystem</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">)</span>

<span class="n">nwb_table</span> <span class="o">=</span> <span class="p">[]</span>
<span class="c1"># skip files that aren&#39;t main session files</span>
<span class="n">files</span> <span class="o">=</span> <span class="p">[</span><span class="n">asset</span> <span class="k">for</span> <span class="n">asset</span> <span class="ow">in</span> <span class="n">my_dandiset</span><span class="o">.</span><span class="n">get_assets</span><span class="p">()</span> <span class="k">if</span> <span class="s2">&quot;probe&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">asset</span><span class="o">.</span><span class="n">path</span><span class="p">]</span>
<span class="c1"># swap this with line above for one of our ophys dandisets</span>
<span class="c1"># files = [asset for asset in my_dandiset.get_assets() if &quot;raw&quot; not in asset.path]</span>
<span class="n">n_files</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">files</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">n_files</span><span class="si">}</span><span class="s2"> files retrieved&quot;</span><span class="p">)</span>

<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">file</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">files</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Examining file </span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">n_files</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">file</span><span class="o">.</span><span class="n">identifier</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>    
    <span class="c1"># get basic file metadata</span>
    <span class="n">row</span> <span class="o">=</span> <span class="p">[</span><span class="n">file</span><span class="o">.</span><span class="n">identifier</span><span class="p">,</span> <span class="n">file</span><span class="o">.</span><span class="n">size</span><span class="p">,</span> <span class="n">file</span><span class="o">.</span><span class="n">path</span><span class="p">]</span>
    
    <span class="n">base_url</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="n">file</span><span class="o">.</span><span class="n">base_download_url</span><span class="p">)</span>
    <span class="n">file_url</span> <span class="o">=</span> <span class="n">base_url</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s2">&quot;Location&quot;</span><span class="p">]</span>

    <span class="c1"># open and read nwb file with streaming</span>
    <span class="k">with</span> <span class="n">fs</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">file_url</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="k">with</span> <span class="n">h5py</span><span class="o">.</span><span class="n">File</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">NWBHDF5IO</span><span class="p">(</span><span class="n">file</span><span class="o">=</span><span class="n">file</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">load_namespaces</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="k">as</span> <span class="n">io</span><span class="p">:</span>
                <span class="n">nwb</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
                <span class="c1"># extract experimental info from within file</span>
                <span class="n">row</span> <span class="o">+=</span> <span class="n">get_nwb_info</span><span class="p">(</span><span class="n">nwb</span><span class="p">)</span>
                <span class="n">nwb_table</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>32 files retrieved
Examining file 1/32: 58703c97-c0a9-4736-b684-73c85c1a444a
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/opt/conda/lib/python3.10/site-packages/hdmf/spec/namespace.py:531: UserWarning: Ignoring cached namespace &#39;hdmf-common&#39; version 1.1.3 because version 1.5.1 is already loaded.
  warn(&quot;Ignoring cached namespace &#39;%s&#39; version %s because version %s is already loaded.&quot;
/opt/conda/lib/python3.10/site-packages/hdmf/spec/namespace.py:531: UserWarning: Ignoring cached namespace &#39;core&#39; version 2.2.2 because version 2.5.0 is already loaded.
  warn(&quot;Ignoring cached namespace &#39;%s&#39; version %s because version %s is already loaded.&quot;
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Examining file 2/32: 02291b99-e583-498b-9929-b68bba2c50e2
Examining file 3/32: 224b57e5-c9a3-46ef-85db-966713f3ccbe
Examining file 4/32: c7f32379-adce-4961-9211-d07790be9cab
Examining file 5/32: b4aeeb19-cdc6-4895-ab7b-bc8a688cf6f5
Examining file 6/32: 106e84a7-1c41-43f1-a675-7df17e4aba69
Examining file 7/32: eb36f94f-d6e7-45c6-aa02-7d4ed23453d3
Examining file 8/32: 5a58bf3d-a1b9-444b-8ab0-ef5478aa42a6
Examining file 9/32: 522e8054-34ca-4579-ae80-350d0b24e0f4
Examining file 10/32: 96c200cf-29c2-457a-b2f3-99f11de5b039
Examining file 11/32: 286c7b06-3cde-4261-9090-e6fbe6c81945
Examining file 12/32: 3876c5f1-f38a-4c89-8f54-6128538f0066
Examining file 13/32: 2e6df882-f31a-440b-a572-ba717a95bf80
Examining file 14/32: 488a9bea-96fb-4028-a33a-08650f50be63
Examining file 15/32: dfc3db15-066a-4a07-b615-a4d7e85c44e1
Examining file 16/32: edf10182-5a4c-454f-ad23-47987a5ca256
Examining file 17/32: be9f8fd8-8f16-4a66-acc6-9e04697650f3
Examining file 18/32: 5f204c90-2005-4143-b880-07d80aa32b20
Examining file 19/32: e0037b53-6d0e-4756-8ca4-f0dcb51ad339
Examining file 20/32: de872cf2-942d-4695-88b1-f7f89cb764fd
Examining file 21/32: 4513d0c9-1e2b-4c8a-aa22-ae81822537c9
Examining file 22/32: 47634abd-db85-48f5-9c33-01887a59d3bc
Examining file 23/32: c9fc315f-5145-45a3-8183-3ad8fe499c4d
Examining file 24/32: 8a17b967-2aa9-4d6a-812c-92b62cf799d7
Examining file 25/32: cdeec90c-9ebe-431c-b3f7-b9f7d93ff37f
Examining file 26/32: cea32745-0d1a-4884-b06f-158d830bcbf3
Examining file 27/32: d6f3e82b-aca9-43fb-9810-048fc2124d50
Examining file 28/32: 17a5432b-7193-42dd-a9ae-e9e8b3fef19c
Examining file 29/32: 3adbba7c-3feb-468b-9829-33fcaa27aacd
Examining file 30/32: 264f3b24-10d9-4100-98cf-d40b6c2a2068
Examining file 31/32: dcafeb62-82af-48c7-87fc-2a2481daf462
Examining file 32/32: 0d8cb49c-8354-4081-8acb-257821aa8413
</pre></div>
</div>
</div>
</div>
<div class="cell tag_output_scroll docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># convert table to pandas dataframe</span>
<span class="n">sessions</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">nwb_table</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;identifier&quot;</span><span class="p">,</span> <span class="s2">&quot;size&quot;</span><span class="p">,</span> <span class="s2">&quot;path&quot;</span><span class="p">,</span> <span class="s2">&quot;session time&quot;</span><span class="p">,</span> <span class="s2">&quot;sub name&quot;</span><span class="p">,</span> <span class="s2">&quot;sub sex&quot;</span><span class="p">,</span> <span class="s2">&quot;sub age&quot;</span><span class="p">,</span> <span class="s2">&quot;sub genotype&quot;</span><span class="p">,</span> <span class="s2">&quot;probes&quot;</span><span class="p">,</span> <span class="s2">&quot;stim types&quot;</span><span class="p">,</span> <span class="s2">&quot;# units&quot;</span><span class="p">,</span> <span class="s2">&quot;session length&quot;</span><span class="p">))</span>
<span class="c1"># swap this with line above for one of our ophys dandisets</span>
<span class="c1"># sessions = pd.DataFrame(nwb_table, columns=(&quot;identifier&quot;, &quot;size&quot;, &quot;path&quot;, &quot;session time&quot;, &quot;session id&quot;, &quot;experiment id&quot;, &quot;container id&quot;, &quot;group&quot;, &quot;group count&quot;, &quot;imaging depth&quot;, &quot;location&quot;, &quot;fov height&quot;, &quot;fov width&quot;, &quot;specimen name&quot;, &quot;sex&quot;, &quot;age&quot;, &quot;genotype&quot;, &quot;stim types&quot;, &quot;# rois&quot;, &quot;session end&quot;))</span>
<span class="n">sessions</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>identifier</th>
      <th>size</th>
      <th>path</th>
      <th>session time</th>
      <th>sub name</th>
      <th>sub sex</th>
      <th>sub age</th>
      <th>sub genotype</th>
      <th>probes</th>
      <th>stim types</th>
      <th># units</th>
      <th>session length</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>58703c97-c0a9-4736-b684-73c85c1a444a</td>
      <td>2856232912</td>
      <td>sub-699733573/sub-699733573_ses-715093703.nwb</td>
      <td>2019-01-19 00:54:18-08:00</td>
      <td>Sst-IRES-Cre;Ai32-386129</td>
      <td>M</td>
      <td>118.0</td>
      <td>Sst-IRES-Cre/wt;Ai32(RCL-ChR2(H134R)_EYFP)/wt</td>
      <td>{probeA, probeC, probeB, probeF, probeE, probeD}</td>
      <td>{gabors_presentations, natural_movie_three_pre...</td>
      <td>2779</td>
      <td>9135.140323</td>
    </tr>
    <tr>
      <th>1</th>
      <td>02291b99-e583-498b-9929-b68bba2c50e2</td>
      <td>3071442940</td>
      <td>sub-703279277/sub-703279277_ses-719161530.nwb</td>
      <td>2019-01-08 16:25:16-08:00</td>
      <td>Sst-IRES-Cre;Ai32-387858</td>
      <td>M</td>
      <td>122.0</td>
      <td>Sst-IRES-Cre/wt;Ai32(RCL-ChR2(H134R)_EYFP)/wt</td>
      <td>{probeA, probeC, probeB, probeF, probeE, probeD}</td>
      <td>{gabors_presentations, natural_movie_three_pre...</td>
      <td>3232</td>
      <td>9151.497467</td>
    </tr>
    <tr>
      <th>2</th>
      <td>224b57e5-c9a3-46ef-85db-966713f3ccbe</td>
      <td>1736516600</td>
      <td>sub-707296975/sub-707296975_ses-721123822.nwb</td>
      <td>2019-01-08 16:25:35-08:00</td>
      <td>Pvalb-IRES-Cre;Ai32-388521</td>
      <td>M</td>
      <td>125.0</td>
      <td>Pvalb-IRES-Cre/wt;Ai32(RCL-ChR2(H134R)_EYFP)/wt</td>
      <td>{probeA, probeC, probeB, probeF, probeE, probeD}</td>
      <td>{gabors_presentations, natural_movie_three_pre...</td>
      <td>1603</td>
      <td>9420.860000</td>
    </tr>
    <tr>
      <th>3</th>
      <td>c7f32379-adce-4961-9211-d07790be9cab</td>
      <td>2156671312</td>
      <td>sub-716813540/sub-716813540_ses-739448407.nwb</td>
      <td>2019-01-08 16:27:24-08:00</td>
      <td>C57BL/6J-404551</td>
      <td>M</td>
      <td>112.0</td>
      <td>wt/wt</td>
      <td>{probeA, probeC, probeB, probeF, probeE, probeD}</td>
      <td>{gabors_presentations, natural_movie_three_pre...</td>
      <td>2370</td>
      <td>9156.676490</td>
    </tr>
    <tr>
      <th>4</th>
      <td>b4aeeb19-cdc6-4895-ab7b-bc8a688cf6f5</td>
      <td>2912508032</td>
      <td>sub-717038285/sub-717038285_ses-732592105.nwb</td>
      <td>2019-01-08 16:26:20-08:00</td>
      <td>C57BL/6J-404553</td>
      <td>M</td>
      <td>100.0</td>
      <td>wt/wt</td>
      <td>{probeC, probeB, probeF, probeE, probeD}</td>
      <td>{gabors_presentations, natural_movie_three_pre...</td>
      <td>3076</td>
      <td>9143.415844</td>
    </tr>
    <tr>
      <th>5</th>
      <td>106e84a7-1c41-43f1-a675-7df17e4aba69</td>
      <td>2182040332</td>
      <td>sub-718643564/sub-718643564_ses-737581020.nwb</td>
      <td>2018-09-25 14:03:59-07:00</td>
      <td>C57BL/6J-404568</td>
      <td>M</td>
      <td>108.0</td>
      <td>wt/wt</td>
      <td>{probeA, probeC, probeB, probeF, probeE, probeD}</td>
      <td>{gabors_presentations, natural_movie_three_pre...</td>
      <td>2055</td>
      <td>9156.655390</td>
    </tr>
    <tr>
      <th>6</th>
      <td>eb36f94f-d6e7-45c6-aa02-7d4ed23453d3</td>
      <td>2646264724</td>
      <td>sub-719817799/sub-719817799_ses-744228101.nwb</td>
      <td>2018-09-25 11:43:40-07:00</td>
      <td>C57BL/6J-404569</td>
      <td>M</td>
      <td>122.0</td>
      <td>wt/wt</td>
      <td>{probeA, probeC, probeB, probeF, probeE, probeD}</td>
      <td>{gabors_presentations, natural_movie_three_pre...</td>
      <td>2695</td>
      <td>9152.193170</td>
    </tr>
    <tr>
      <th>7</th>
      <td>5a58bf3d-a1b9-444b-8ab0-ef5478aa42a6</td>
      <td>1859545192</td>
      <td>sub-719828686/sub-719828686_ses-754312389.nwb</td>
      <td>2018-09-25 11:02:57-07:00</td>
      <td>C57BL/6J-404570</td>
      <td>M</td>
      <td>140.0</td>
      <td>wt/wt</td>
      <td>{probeA, probeC, probeB, probeF, probeE, probeD}</td>
      <td>{gabors_presentations, natural_movie_three_pre...</td>
      <td>1891</td>
      <td>9152.415139</td>
    </tr>
    <tr>
      <th>8</th>
      <td>522e8054-34ca-4579-ae80-350d0b24e0f4</td>
      <td>2120570640</td>
      <td>sub-722882751/sub-722882751_ses-743475441.nwb</td>
      <td>2018-10-26 12:50:58-07:00</td>
      <td>C57BL/6J-404555</td>
      <td>M</td>
      <td>121.0</td>
      <td>wt/wt</td>
      <td>{probeA, probeC, probeB, probeF, probeE, probeD}</td>
      <td>{gabors_presentations, natural_movie_three_pre...</td>
      <td>2133</td>
      <td>9152.251155</td>
    </tr>
    <tr>
      <th>9</th>
      <td>96c200cf-29c2-457a-b2f3-99f11de5b039</td>
      <td>2917686364</td>
      <td>sub-723627600/sub-723627600_ses-742951821.nwb</td>
      <td>2018-10-26 12:47:04-07:00</td>
      <td>C57BL/6J-404571</td>
      <td>M</td>
      <td>120.0</td>
      <td>wt/wt</td>
      <td>{probeA, probeC, probeB, probeF, probeE, probeD}</td>
      <td>{gabors_presentations, natural_movie_three_pre...</td>
      <td>3008</td>
      <td>9152.343504</td>
    </tr>
    <tr>
      <th>10</th>
      <td>286c7b06-3cde-4261-9090-e6fbe6c81945</td>
      <td>3240335928</td>
      <td>sub-726141242/sub-726141242_ses-750332458.nwb</td>
      <td>2018-09-25 11:44:22-07:00</td>
      <td>C57BL/6J-412791</td>
      <td>M</td>
      <td>91.0</td>
      <td>wt/wt</td>
      <td>{probeA, probeC, probeB, probeF, probeE, probeD}</td>
      <td>{gabors_presentations, natural_movie_three_pre...</td>
      <td>3047</td>
      <td>9152.001828</td>
    </tr>
    <tr>
      <th>11</th>
      <td>3876c5f1-f38a-4c89-8f54-6128538f0066</td>
      <td>2818447324</td>
      <td>sub-726162193/sub-726162193_ses-750749662.nwb</td>
      <td>2018-10-26 12:58:51-07:00</td>
      <td>C57BL/6J-412792</td>
      <td>M</td>
      <td>92.0</td>
      <td>wt/wt</td>
      <td>{probeA, probeC, probeB, probeF, probeE, probeD}</td>
      <td>{gabors_presentations, natural_movie_three_pre...</td>
      <td>2489</td>
      <td>9151.908429</td>
    </tr>
    <tr>
      <th>12</th>
      <td>2e6df882-f31a-440b-a572-ba717a95bf80</td>
      <td>2562070092</td>
      <td>sub-726170927/sub-726170927_ses-746083955.nwb</td>
      <td>2018-10-26 12:58:43-07:00</td>
      <td>Pvalb-IRES-Cre;Ai32-403407</td>
      <td>F</td>
      <td>98.0</td>
      <td>Pvalb-IRES-Cre/wt;Ai32(RCL-ChR2(H134R)_EYFP)/wt</td>
      <td>{probeA, probeC, probeB, probeF, probeE, probeD}</td>
      <td>{gabors_presentations, natural_movie_three_pre...</td>
      <td>2098</td>
      <td>9162.410584</td>
    </tr>
    <tr>
      <th>13</th>
      <td>488a9bea-96fb-4028-a33a-08650f50be63</td>
      <td>2696702864</td>
      <td>sub-726298249/sub-726298249_ses-754829445.nwb</td>
      <td>2018-10-26 12:18:13-07:00</td>
      <td>C57BL/6J-404554</td>
      <td>M</td>
      <td>141.0</td>
      <td>wt/wt</td>
      <td>{probeA, probeC, probeB, probeF, probeE}</td>
      <td>{gabors_presentations, natural_movie_three_pre...</td>
      <td>2299</td>
      <td>9152.206060</td>
    </tr>
    <tr>
      <th>14</th>
      <td>dfc3db15-066a-4a07-b615-a4d7e85c44e1</td>
      <td>2376304984</td>
      <td>sub-730756767/sub-730756767_ses-757970808.nwb</td>
      <td>2018-10-26 12:58:48-07:00</td>
      <td>C57BL/6J-412793</td>
      <td>M</td>
      <td>106.0</td>
      <td>wt/wt</td>
      <td>{probeA, probeC, probeF, probeE, probeD}</td>
      <td>{gabors_presentations, natural_movie_three_pre...</td>
      <td>2422</td>
      <td>9152.150001</td>
    </tr>
    <tr>
      <th>15</th>
      <td>edf10182-5a4c-454f-ad23-47987a5ca256</td>
      <td>2235680540</td>
      <td>sub-730760263/sub-730760263_ses-755434585.nwb</td>
      <td>2018-10-26 12:58:07-07:00</td>
      <td>Vip-IRES-Cre;Ai32-405751</td>
      <td>M</td>
      <td>100.0</td>
      <td>Vip-IRES-Cre/wt;Ai32(RCL-ChR2(H134R)_EYFP)/wt</td>
      <td>{probeA, probeC, probeB, probeF, probeE, probeD}</td>
      <td>{gabors_presentations, natural_movie_three_pre...</td>
      <td>2127</td>
      <td>9152.216507</td>
    </tr>
    <tr>
      <th>16</th>
      <td>be9f8fd8-8f16-4a66-acc6-9e04697650f3</td>
      <td>3073327756</td>
      <td>sub-732548371/sub-732548371_ses-751348571.nwb</td>
      <td>2018-09-25 13:40:29-07:00</td>
      <td>Vip-IRES-Cre;Ai32-405755</td>
      <td>F</td>
      <td>93.0</td>
      <td>Vip-IRES-Cre/wt;Ai32(RCL-ChR2(H134R)_EYFP)/wt</td>
      <td>{probeA, probeC, probeB, probeF, probeE, probeD}</td>
      <td>{gabors_presentations, natural_movie_three_pre...</td>
      <td>2645</td>
      <td>9151.846666</td>
    </tr>
    <tr>
      <th>17</th>
      <td>5f204c90-2005-4143-b880-07d80aa32b20</td>
      <td>3039748856</td>
      <td>sub-733457986/sub-733457986_ses-757216464.nwb</td>
      <td>2018-10-26 12:55:34-07:00</td>
      <td>C57BL/6J-412794</td>
      <td>M</td>
      <td>105.0</td>
      <td>wt/wt</td>
      <td>{probeA, probeC, probeB, probeF, probeE, probeD}</td>
      <td>{gabors_presentations, natural_movie_three_pre...</td>
      <td>2812</td>
      <td>9152.436465</td>
    </tr>
    <tr>
      <th>18</th>
      <td>e0037b53-6d0e-4756-8ca4-f0dcb51ad339</td>
      <td>2581201976</td>
      <td>sub-734865729/sub-734865729_ses-756029989.nwb</td>
      <td>2018-10-26 12:59:18-07:00</td>
      <td>Sst-IRES-Cre;Ai32-406807</td>
      <td>M</td>
      <td>96.0</td>
      <td>Sst-IRES-Cre/wt;Ai32(RCL-ChR2(H134R)_EYFP)/wt</td>
      <td>{probeA, probeC, probeB, probeF, probeE, probeD}</td>
      <td>{gabors_presentations, natural_movie_three_pre...</td>
      <td>2169</td>
      <td>9152.076028</td>
    </tr>
    <tr>
      <th>19</th>
      <td>de872cf2-942d-4695-88b1-f7f89cb764fd</td>
      <td>2198584804</td>
      <td>sub-735109599/sub-735109599_ses-758798717.nwb</td>
      <td>2018-10-31 10:39:23-07:00</td>
      <td>Sst-IRES-Cre;Ai32-406805</td>
      <td>M</td>
      <td>102.0</td>
      <td>Sst-IRES-Cre/wt;Ai32(RCL-ChR2(H134R)_EYFP)/wt</td>
      <td>{probeC, probeB, probeE, probeA}</td>
      <td>{gabors_presentations, natural_movie_three_pre...</td>
      <td>1702</td>
      <td>9152.213369</td>
    </tr>
    <tr>
      <th>20</th>
      <td>4513d0c9-1e2b-4c8a-aa22-ae81822537c9</td>
      <td>2864072620</td>
      <td>sub-738651046/sub-738651046_ses-760693773.nwb</td>
      <td>2018-10-26 12:59:23-07:00</td>
      <td>Sst-IRES-Cre;Ai32-406808</td>
      <td>F</td>
      <td>110.0</td>
      <td>Sst-IRES-Cre/wt;Ai32(RCL-ChR2(H134R)_EYFP)/wt</td>
      <td>{probeA, probeC, probeB, probeF, probeE, probeD}</td>
      <td>{gabors_presentations, natural_movie_three_pre...</td>
      <td>2285</td>
      <td>9146.395044</td>
    </tr>
    <tr>
      <th>21</th>
      <td>47634abd-db85-48f5-9c33-01887a59d3bc</td>
      <td>1960982972</td>
      <td>sub-739783158/sub-739783158_ses-760345702.nwb</td>
      <td>2019-01-19 00:36:58-08:00</td>
      <td>Pvalb-IRES-Cre;Ai32-407972</td>
      <td>M</td>
      <td>103.0</td>
      <td>Pvalb-IRES-Cre/wt;Ai32(RCL-ChR2(H134R)_EYFP)/wt</td>
      <td>{probeA, probeC, probeB, probeE, probeD}</td>
      <td>{gabors_presentations, natural_movie_three_pre...</td>
      <td>1784</td>
      <td>9152.378596</td>
    </tr>
    <tr>
      <th>22</th>
      <td>c9fc315f-5145-45a3-8183-3ad8fe499c4d</td>
      <td>1862261144</td>
      <td>sub-740268983/sub-740268983_ses-759883607.nwb</td>
      <td>2018-10-26 12:55:45-07:00</td>
      <td>C57BL/6J-412799</td>
      <td>M</td>
      <td>113.0</td>
      <td>wt/wt</td>
      <td>{probeC, probeB, probeE, probeA}</td>
      <td>{gabors_presentations, natural_movie_three_pre...</td>
      <td>1763</td>
      <td>9152.463399</td>
    </tr>
    <tr>
      <th>23</th>
      <td>8a17b967-2aa9-4d6a-812c-92b62cf799d7</td>
      <td>2537645144</td>
      <td>sub-742602884/sub-742602884_ses-763673393.nwb</td>
      <td>2018-12-06 12:48:16-08:00</td>
      <td>C57BL/6J-412803</td>
      <td>M</td>
      <td>126.0</td>
      <td>wt/wt</td>
      <td>{probeA, probeC, probeB, probeF, probeE, probeD}</td>
      <td>{gabors_presentations, natural_movie_three_pre...</td>
      <td>2455</td>
      <td>9725.660740</td>
    </tr>
    <tr>
      <th>24</th>
      <td>cdeec90c-9ebe-431c-b3f7-b9f7d93ff37f</td>
      <td>2674791348</td>
      <td>sub-742714472/sub-742714472_ses-761418226.nwb</td>
      <td>2018-10-26 00:48:22-07:00</td>
      <td>C57BL/6J-412802</td>
      <td>M</td>
      <td>119.0</td>
      <td>wt/wt</td>
      <td>{probeA, probeC, probeB, probeF, probeE, probeD}</td>
      <td>{gabors_presentations, natural_movie_three_pre...</td>
      <td>2371</td>
      <td>9729.131700</td>
    </tr>
    <tr>
      <th>25</th>
      <td>cea32745-0d1a-4884-b06f-158d830bcbf3</td>
      <td>2021557700</td>
      <td>sub-744915196/sub-744915196_ses-762602078.nwb</td>
      <td>2018-10-26 00:58:47-07:00</td>
      <td>Sst-IRES-Cre;Ai32-408152</td>
      <td>M</td>
      <td>110.0</td>
      <td>Sst-IRES-Cre/wt;Ai32(RCL-ChR2(H134R)_EYFP)/wt</td>
      <td>{probeA, probeC, probeB, probeF, probeE, probeD}</td>
      <td>{gabors_presentations, natural_movie_three_pre...</td>
      <td>2159</td>
      <td>9727.980945</td>
    </tr>
    <tr>
      <th>26</th>
      <td>d6f3e82b-aca9-43fb-9810-048fc2124d50</td>
      <td>2865464220</td>
      <td>sub-745276220/sub-745276220_ses-762120172.nwb</td>
      <td>2018-10-26 00:38:26-07:00</td>
      <td>Vip-IRES-Cre;Ai32-410343</td>
      <td>M</td>
      <td>100.0</td>
      <td>Vip-IRES-Cre/wt;Ai32(RCL-ChR2(H134R)_EYFP)/wt</td>
      <td>{probeA, probeC, probeB, probeE, probeD}</td>
      <td>{gabors_presentations, natural_movie_three_pre...</td>
      <td>2361</td>
      <td>9729.247966</td>
    </tr>
    <tr>
      <th>27</th>
      <td>17a5432b-7193-42dd-a9ae-e9e8b3fef19c</td>
      <td>1928749868</td>
      <td>sub-757329617/sub-757329617_ses-773418906.nwb</td>
      <td>2018-12-10 15:16:20-08:00</td>
      <td>Pvalb-IRES-Cre;Ai32-410315</td>
      <td>F</td>
      <td>124.0</td>
      <td>Pvalb-IRES-Cre/wt;Ai32(RCL-ChR2(H134R)_EYFP)/wt</td>
      <td>{probeA, probeC, probeB, probeF, probeE, probeD}</td>
      <td>{gabors_presentations, natural_movie_three_pre...</td>
      <td>1880</td>
      <td>9157.163520</td>
    </tr>
    <tr>
      <th>28</th>
      <td>3adbba7c-3feb-468b-9829-33fcaa27aacd</td>
      <td>2317463664</td>
      <td>sub-769360771/sub-769360771_ses-791319847.nwb</td>
      <td>2019-01-08 13:55:01-08:00</td>
      <td>Vip-IRES-Cre;Ai32-417678</td>
      <td>M</td>
      <td>116.0</td>
      <td>Vip-IRES-Cre/wt;Ai32(RCL-ChR2(H134R)_EYFP)/wt</td>
      <td>{probeA, probeC, probeB, probeF, probeE, probeD}</td>
      <td>{gabors_presentations, natural_movie_three_pre...</td>
      <td>2020</td>
      <td>9726.770955</td>
    </tr>
    <tr>
      <th>29</th>
      <td>264f3b24-10d9-4100-98cf-d40b6c2a2068</td>
      <td>2737981244</td>
      <td>sub-772616820/sub-772616820_ses-799864342.nwb</td>
      <td>2019-01-08 13:26:07-08:00</td>
      <td>C57BL/6J-424448</td>
      <td>M</td>
      <td>129.0</td>
      <td>wt/wt</td>
      <td>{probeA, probeC, probeB, probeF, probeE, probeD}</td>
      <td>{gabors_presentations, natural_movie_three_pre...</td>
      <td>2249</td>
      <td>9726.645245</td>
    </tr>
    <tr>
      <th>30</th>
      <td>dcafeb62-82af-48c7-87fc-2a2481daf462</td>
      <td>2864276308</td>
      <td>sub-775876808/sub-775876808_ses-798911424.nwb</td>
      <td>2018-12-21 00:02:57-08:00</td>
      <td>Vip-IRES-Cre;Ai32-421338</td>
      <td>F</td>
      <td>110.0</td>
      <td>Vip-IRES-Cre/wt;Ai32(RCL-ChR2(H134R)_EYFP)/wt</td>
      <td>{probeA, probeC, probeB, probeF, probeE, probeD}</td>
      <td>{gabors_presentations, natural_movie_three_pre...</td>
      <td>2525</td>
      <td>9722.497795</td>
    </tr>
    <tr>
      <th>31</th>
      <td>0d8cb49c-8354-4081-8acb-257821aa8413</td>
      <td>2545679280</td>
      <td>sub-776061236/sub-776061236_ses-797828357.nwb</td>
      <td>2019-01-08 13:26:13-08:00</td>
      <td>Pvalb-IRES-Cre;Ai32-421529</td>
      <td>M</td>
      <td>107.0</td>
      <td>Pvalb-IRES-Cre/wt;Ai32(RCL-ChR2(H134R)_EYFP)/wt</td>
      <td>{probeA, probeC, probeB, probeF, probeE, probeD}</td>
      <td>{gabors_presentations, natural_movie_three_pre...</td>
      <td>2154</td>
      <td>9726.918315</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># output all session metadata to local CSV file</span>
<span class="n">sessions</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s2">&quot;sessions.csv&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="selecting-files">
<h2>Selecting Files<a class="headerlink" href="#selecting-files" title="Permalink to this heading">#</a></h2>
<p><strong>Pandas</strong> syntax can be used to filter the table above and select individual sessions.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">selected_sessions</span> <span class="o">=</span> <span class="n">sessions</span><span class="p">[</span><span class="n">sessions</span><span class="p">[</span><span class="s2">&quot;size&quot;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="mi">2_100_000_000</span><span class="p">]</span>
<span class="c1"># selected_sessions = sessions[sessions[&quot;sub sex&quot;] == &quot;F&quot;]</span>
<span class="c1"># selected_sessions = sessions[sessions[&quot;# units&quot;] &gt; 2900]</span>
<span class="n">selected_sessions</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>identifier</th>
      <th>size</th>
      <th>path</th>
      <th>session time</th>
      <th>sub name</th>
      <th>sub sex</th>
      <th>sub age</th>
      <th>sub genotype</th>
      <th>probes</th>
      <th>stim types</th>
      <th># units</th>
      <th>session length</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2</th>
      <td>224b57e5-c9a3-46ef-85db-966713f3ccbe</td>
      <td>1736516600</td>
      <td>sub-707296975/sub-707296975_ses-721123822.nwb</td>
      <td>2019-01-08 16:25:35-08:00</td>
      <td>Pvalb-IRES-Cre;Ai32-388521</td>
      <td>M</td>
      <td>125.0</td>
      <td>Pvalb-IRES-Cre/wt;Ai32(RCL-ChR2(H134R)_EYFP)/wt</td>
      <td>{probeA, probeC, probeB, probeF, probeE, probeD}</td>
      <td>{gabors_presentations, natural_movie_three_pre...</td>
      <td>1603</td>
      <td>9420.860000</td>
    </tr>
    <tr>
      <th>7</th>
      <td>5a58bf3d-a1b9-444b-8ab0-ef5478aa42a6</td>
      <td>1859545192</td>
      <td>sub-719828686/sub-719828686_ses-754312389.nwb</td>
      <td>2018-09-25 11:02:57-07:00</td>
      <td>C57BL/6J-404570</td>
      <td>M</td>
      <td>140.0</td>
      <td>wt/wt</td>
      <td>{probeA, probeC, probeB, probeF, probeE, probeD}</td>
      <td>{gabors_presentations, natural_movie_three_pre...</td>
      <td>1891</td>
      <td>9152.415139</td>
    </tr>
    <tr>
      <th>21</th>
      <td>47634abd-db85-48f5-9c33-01887a59d3bc</td>
      <td>1960982972</td>
      <td>sub-739783158/sub-739783158_ses-760345702.nwb</td>
      <td>2019-01-19 00:36:58-08:00</td>
      <td>Pvalb-IRES-Cre;Ai32-407972</td>
      <td>M</td>
      <td>103.0</td>
      <td>Pvalb-IRES-Cre/wt;Ai32(RCL-ChR2(H134R)_EYFP)/wt</td>
      <td>{probeA, probeC, probeB, probeE, probeD}</td>
      <td>{gabors_presentations, natural_movie_three_pre...</td>
      <td>1784</td>
      <td>9152.378596</td>
    </tr>
    <tr>
      <th>22</th>
      <td>c9fc315f-5145-45a3-8183-3ad8fe499c4d</td>
      <td>1862261144</td>
      <td>sub-740268983/sub-740268983_ses-759883607.nwb</td>
      <td>2018-10-26 12:55:45-07:00</td>
      <td>C57BL/6J-412799</td>
      <td>M</td>
      <td>113.0</td>
      <td>wt/wt</td>
      <td>{probeC, probeB, probeE, probeA}</td>
      <td>{gabors_presentations, natural_movie_three_pre...</td>
      <td>1763</td>
      <td>9152.463399</td>
    </tr>
    <tr>
      <th>25</th>
      <td>cea32745-0d1a-4884-b06f-158d830bcbf3</td>
      <td>2021557700</td>
      <td>sub-744915196/sub-744915196_ses-762602078.nwb</td>
      <td>2018-10-26 00:58:47-07:00</td>
      <td>Sst-IRES-Cre;Ai32-408152</td>
      <td>M</td>
      <td>110.0</td>
      <td>Sst-IRES-Cre/wt;Ai32(RCL-ChR2(H134R)_EYFP)/wt</td>
      <td>{probeA, probeC, probeB, probeF, probeE, probeD}</td>
      <td>{gabors_presentations, natural_movie_three_pre...</td>
      <td>2159</td>
      <td>9727.980945</td>
    </tr>
    <tr>
      <th>27</th>
      <td>17a5432b-7193-42dd-a9ae-e9e8b3fef19c</td>
      <td>1928749868</td>
      <td>sub-757329617/sub-757329617_ses-773418906.nwb</td>
      <td>2018-12-10 15:16:20-08:00</td>
      <td>Pvalb-IRES-Cre;Ai32-410315</td>
      <td>F</td>
      <td>124.0</td>
      <td>Pvalb-IRES-Cre/wt;Ai32(RCL-ChR2(H134R)_EYFP)/wt</td>
      <td>{probeA, probeC, probeB, probeF, probeE, probeD}</td>
      <td>{gabors_presentations, natural_movie_three_pre...</td>
      <td>1880</td>
      <td>9157.163520</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section id="downloading-selected-files">
<h2>Downloading Selected Files<a class="headerlink" href="#downloading-selected-files" title="Permalink to this heading">#</a></h2>
<p>To download the files, we use the same method that is explained in <a class="reference internal" href="download_nwb.html"><span class="doc std std-doc">Downloading an NWB File</span></a>. This can be used with the paths from the selected sessions above to just download the files of interest.  Set <code class="docutils literal notranslate"><span class="pre">download_loc</span></code> to be the relative path of where the files should be downloaded. Note that if the files are large, this can take a long time.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">download_loc</span> <span class="o">=</span> <span class="s2">&quot;.&quot;</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">selected_paths</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">selected_sessions</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
<span class="n">selected_paths</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;sub-707296975/sub-707296975_ses-721123822.nwb&#39;,
 &#39;sub-719828686/sub-719828686_ses-754312389.nwb&#39;,
 &#39;sub-739783158/sub-739783158_ses-760345702.nwb&#39;,
 &#39;sub-740268983/sub-740268983_ses-759883607.nwb&#39;,
 &#39;sub-744915196/sub-744915196_ses-762602078.nwb&#39;,
 &#39;sub-757329617/sub-757329617_ses-773418906.nwb&#39;}
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">dandi_filepath</span> <span class="ow">in</span> <span class="n">selected_paths</span><span class="p">:</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="n">dandi_filepath</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">file</span> <span class="o">=</span> <span class="n">my_dandiset</span><span class="o">.</span><span class="n">get_asset_by_path</span><span class="p">(</span><span class="n">dandi_filepath</span><span class="p">)</span>
    <span class="n">file</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">download_loc</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Downloaded file to </span><span class="si">{</span><span class="n">download_loc</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Downloaded file to ./sub-740268983_ses-759883607.nwb
Downloaded file to ./sub-757329617_ses-773418906.nwb
Downloaded file to ./sub-719828686_ses-754312389.nwb
Downloaded file to ./sub-739783158_ses-760345702.nwb
Downloaded file to ./sub-707296975_ses-721123822.nwb
Downloaded file to ./sub-744915196_ses-762602078.nwb
</pre></div>
</div>
</div>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "AllenInstitute/openscope_databook",
            ref: "main",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./basics"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="stream_nwb.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Streaming an NWB File with fsspec</p>
      </div>
    </a>
    <a class="right-next"
       href="../visualization/visualize_2p_raw.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Visualizing Raw 2-Photon Images</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#environment-setup">Environment Setup</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#getting-dandiset-metadata">Getting Dandiset Metadata</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#get-nwb-info">Get NWB Info</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#getting-table">Getting Table</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#selecting-files">Selecting Files</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#downloading-selected-files">Downloading Selected Files</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Carter Peene
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>